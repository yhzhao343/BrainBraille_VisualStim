(()=>{var V="#6200EE",q="#3700B3",U="#BB86FC";function re(){let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function se(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}function ie(){return{mode:"Study",interval:"3s",TR:"750ms",start_delay_s:5}}var oe={stroke:"#000000",fill:"none","stroke-width":1.5},le={stroke:"#b5b5b5",fill:"none","stroke-width":1.5};var Q={expected_task_interval_s:3,expected_TR_s:.75,front_space_padding_s:6,back_space_padding_s:12,num_space_between_words:1,num_space_between_sents:2},ae={expected_task_interval_s:1.5,expected_TR_s:.75,front_space_padding_s:6,back_space_padding_s:12,num_space_between_words:2,num_space_between_sents:3};function de(e,t=!1){let n;t?n=e:n=JSON.parse(JSON.stringify(e));for(let s=n.length-1;s>=0;s--){let r=Math.floor(Math.random()*(s+1)),i=n[s];n[s]=n[r],n[r]=i}return n}var ce=[["do","not","worry","about","this"],["the","dog","will","bite","you"],["time","to","go","shopping"],["are","you","talking","to","me"],["these","cookies","are","so","amazing"],["want","to","join","us","for","lunch"],["quick","there","is","someone","knocking"],["have","a","good","weekend"],["tickets","are","very","expensive"]];function g(e){let t=[];for(let[n,s]of Object.entries(e))t.push(`${n}:${s};`);return t.join("")}function ue(e,t=Q){let n=Math.ceil(t.front_space_padding_s/t.expected_task_interval_s),s=Math.ceil(t.back_space_padding_s/t.expected_task_interval_s),r=new Array(n).fill("space"),i=new Array(n).fill({phrase_n:-1,word_n:-1}),_=new Array(n).fill(-1);for(let[o,h]of e.entries()){for(let[v,m]of h.entries()){for(let u=0;u<m.length;u++){let f=m[u];r.push(f),i.push({phrase_n:o,word_n:v}),_.push(u)}r.push(...new Array(t.num_space_between_words).fill("space")),i.push(...new Array(t.num_space_between_words).fill("")),_.push(...new Array(t.num_space_between_words).fill(-1))}let d=t.num_space_between_words-t.num_space_between_words;r.push(...new Array(d).fill("space")),i.push(...new Array(d).fill("")),_.push(...new Array(d).fill(-1))}let p=s-t.num_space_between_words;r.push(...new Array(p).fill("space")),i.push(...new Array(p).fill("")),_.push(...new Array(p).fill(-1));let l=r.slice(1);return l.push("space"),{...{curr_l_list:r,curr_word_text_list:i,next_l_list:l,curr_l_in_word_ind_list:_},...t}}var _e=360,me=400,pe=8,be=6;function*fe(e){let t=0;for(;;)t++,yield`${e}_${t}`}var F={};function H(e="id"){return e in F||(F[e]=fe(e)),F[e].next().value}var ye=1/10,he=[{x:1/2,y:1/11},{x:1/2,y:6/11},{x:1/13,y:3/11},{x:12/13,y:3/11},{x:2/5,y:22/23},{x:3/5,y:22/23}],K=["rgb(145, 118, 96)","rgb(76, 118, 173)","rgb(192, 76, 84)","rgb(126, 115, 176)","rgb(218, 129, 87)","rgb(91, 166, 106)"];var xe={space:[0,0,0,0,0,0],a:[1,0,0,0,0,0],b:[0,0,1,1,0,0],c:[0,1,0,0,0,1],d:[0,0,1,0,1,0],e:[0,1,0,0,0,0],f:[0,1,0,1,0,0],g:[1,1,0,0,0,0],h:[0,0,0,1,1,0],i:[0,0,1,0,0,0],j:[0,0,1,1,1,0],k:[1,0,0,1,0,1],l:[0,0,0,0,1,1],m:[0,0,1,0,0,1],n:[0,0,0,1,0,0],o:[0,0,0,0,1,0],p:[1,0,1,0,0,0],q:[0,0,1,1,0,1],r:[0,0,0,1,0,1],s:[1,0,0,1,0,0],t:[0,0,0,0,0,1],u:[0,1,0,0,1,0],v:[1,0,0,0,1,0],w:[1,0,0,0,0,1],x:[1,0,1,1,0,0],y:[0,1,1,0,0,0],z:[0,1,1,1,0,0]},Y=class{container_div;curr_text;next_text;curr_word;curr_index;curr_l_in_word_ind;curr_dots;next_dots;bb_dict;curr_text_fill;next_text_fill;constructor(t,n,s,r,i,_,p,l=xe,b="#000000",o="#b5b5b5"){this.container_div=t,this.curr_text=n,this.next_text=s,this.curr_word=r,this.curr_index=i,this.curr_dots=_,this.next_dots=p,this.curr_l_in_word_ind=0,this.bb_dict=l,this.curr_text_fill=b,this.next_text_fill=o}update(t,n,s,r,i){this.curr_text.innerHTML=t,t.length>0&&this.curr_text.setAttribute("fill",this.curr_text_fill);let _=this.bb_dict[t];for(let l=0;l<this.curr_dots.length;l++)_[l]===1?this.curr_dots[l].setAttribute("fill",`url(#curr_${l})`):this.curr_dots[l].setAttribute("fill","None");this.next_text.innerHTML=n,n.length>0&&this.next_text.setAttribute("fill",this.next_text_fill);let p=this.bb_dict[n];for(let l=0;l<this.next_dots.length;l++)p[l]===1?this.next_dots[l].setAttribute("fill",`url(#next_${l})`):this.next_dots[l].setAttribute("fill","None");s.length>0?(this.curr_word.setAttribute("fill",this.next_text_fill),this.curr_word.innerHTML=`${s.substring(0,r)}<tspan fill=${this.curr_text_fill}>${s[r]}</tspan>${s.substring(r+1)}`):this.curr_word.innerHTML="",i&&(this.curr_index.innerHTML=i)}};function Z(){let e=new URLSearchParams(window.location.search),t=ie();switch(e.get("mode")){case"Practice":t.mode="Practice";break;case"Study":t.mode="Study";break;default:}switch(e.get("interval")){case"3s":t.interval="3s";break;case"1.5s":t.interval="1.5s";break;default:}switch(e.get("TR")){case"750ms":t.TR="750ms";break;case"500ms":t.TR="500ms";break;case"n/a":t.TR="N.A.";default:}let n=e.get("start_delay_s");return n&&(t.start_delay_s=parseFloat(n)),t}function W(e,t,n=1,s=.2){let r=["<defs>"];for(let i=0;i<e.length;i++){let _=`<radialGradient id="${t}_${i}" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
<stop offset="${s}" style="stop-color:${e[i]};stop-opacity:${n}" />
<stop offset="${1-s}" style="stop-color:rgb(255,255,255);stop-opacity:0" />
</radialGradient>`;r.push(_)}return r.push("</defs>"),r.join(`
`)}function J(e="id"){return`<g transform="matrix(2.0000001,0,0,2.0000001,1.7743231,0.23161151)" id="${H("svg")}">
    <path id="${H("path")}" d="m 66.228231,198.37588 c -0.590026,-0.65878 -0.589257,-0.64999 -0.224893,-2.57209 0.359051,-1.89406 0.810047,-2.87574 1.974482,-4.29776 l 0.93887,-1.14656 0.187266,-3.3156 c 0.207926,-3.68142 -0.01963,-12.63779 -0.392481,-15.44713 -0.132321,-0.99702 -0.306089,-5.07572 -0.386155,-9.06378 l -0.145573,-7.25103 1.174247,-4.74106 1.174245,-4.74105 0.180645,-6.41437 c 0.09936,-3.52791 0.266757,-6.63432 0.372012,-6.90316 0.229322,-0.58573 -0.35297,-4.16589 -0.724931,-4.45717 -0.143913,-0.11268 -0.587231,-0.20681 -0.985151,-0.20916 l -0.723493,-0.004 0.148236,-6.62354 c 0.136931,-6.11832 0.777565,-14.7576 1.442462,-19.45227 0.152066,-1.07372 0.366375,-3.395431 0.476243,-5.159383 0.219478,-3.523761 1.109533,-8.543512 2.245362,-12.663426 1.322123,-4.795659 1.478937,-6.193064 1.536405,-13.691268 0.04889,-6.378503 0.0063,-7.185804 -0.500355,-9.481686 -1.243162,-5.633393 -2.890287,-10.172357 -3.872807,-10.672192 -0.298346,-0.151783 -1.634692,-0.62204 -2.969654,-1.045032 l -2.427211,-0.769081 -1.437189,0.573111 c -3.428357,1.367121 -8.461401,2.553102 -12.655764,2.982177 -2.968548,0.303674 -4.53547,0.592474 -5.321891,0.980882 -0.613024,0.302768 -2.087812,0.822502 -3.277309,1.154962 -1.944914,0.543598 -3.106018,0.623894 -11.529404,0.797403 -10.14822,0.20904 -10.346689,0.237986 -13.033551,1.900884 -1.752083,1.084361 -4.915454,2.029637 -7.004923,2.093208 C 8.9795706,58.781931 8.7407228,58.71562 8.3911366,58.16032 8.0162682,57.564904 7.8316339,57.532829 4.7793785,57.532829 c -1.7691817,0 -3.4953943,-0.118307 -3.83602708,-0.262913 -0.72528914,-0.308136 -1.0766519,-1.271248 -0.66548962,-1.824395 0.37178337,-0.500182 2.9985751,-1.443877 5.4847545,-1.970462 1.0754992,-0.227794 2.6231563,-0.658912 3.4392388,-0.958033 0.8160809,-0.29913 2.3743089,-0.725264 3.4627269,-0.946974 4.695781,-0.956524 9.519988,-2.205243 10.442856,-2.703083 0.548132,-0.295695 1.205874,-0.537622 1.461648,-0.537622 0.255776,0 0.801989,-0.194546 1.213807,-0.432321 0.960344,-0.554485 5.265404,-2.229128 7.843781,-3.051186 2.33104,-0.743204 4.33146,-1.143239 7.603717,-1.520575 1.628111,-0.187744 3.058956,-0.57017 4.620897,-1.235046 2.340892,-0.996449 4.811297,-1.766364 8.257205,-2.573398 1.099026,-0.25739 2.740947,-0.701591 3.648715,-0.987112 0.907769,-0.285521 1.876112,-0.519128 2.151875,-0.519128 0.275762,0 0.769446,-0.233172 1.097073,-0.518157 0.651389,-0.566605 3.507754,-2.233884 5.091696,-2.972056 2.166767,-1.009785 3.63617,-1.327634 6.993792,-1.51284 3.387151,-0.186833 3.559609,-0.226689 5.495123,-1.27 2.97863,-1.605586 3.926431,-2.413504 4.601257,-3.922169 l 0.596558,-1.333693 -0.590915,-1.974618 c -0.325004,-1.08604 -0.773821,-2.225616 -0.99737,-2.532391 -1.092669,-1.499451 -1.431931,-4.171972 -1.203699,-9.48211 0.187184,-4.3551157 0.456965,-5.4717645 1.860702,-7.7016038 1.163668,-1.848484 1.65391,-2.3328018 3.226819,-3.187817 2.511534,-1.36524104 6.34725,-0.64742751 8.313675,1.5558179 0.510459,0.5719405 1.31538,1.8868414 1.788704,2.9220022 0.845156,1.8483533 0.864943,1.9717664 1.102984,6.8808337 0.217432,4.483988 0.196767,5.162326 -0.200628,6.587474 -0.243668,0.873812 -0.603169,1.791392 -0.798898,2.03907 -0.644868,0.816024 -1.581198,4.601729 -1.355486,5.480439 0.517949,2.016445 0.884333,2.398469 3.927127,4.094752 l 2.958563,1.649313 3.24711,0.198711 c 4.34587,0.265952 5.86009,0.724796 10.02565,3.037992 1.94228,1.078577 3.71997,1.96105 3.95043,1.96105 0.23046,0 0.64187,0.13317 0.91426,0.295937 0.27238,0.162762 2.09149,0.668154 4.04248,1.123091 4.32547,1.008628 6.70808,1.739752 9.16723,2.81305 1.31833,0.57538 2.79837,0.936979 4.99557,1.220512 3.6068,0.46543 3.86262,0.519292 6.86891,1.446387 1.23639,0.381294 3.16119,0.971819 4.2773,1.31229 1.11612,0.34046 2.54115,0.953929 3.16671,1.363263 0.62557,0.409331 1.30767,0.744236 1.51577,0.744236 0.20808,0 0.75008,0.242634 1.2044,0.539192 0.45433,0.296558 2.28726,0.856852 4.07317,1.245104 6.13108,1.332874 8.24636,1.855549 10.24092,2.530514 1.09903,0.371913 2.72882,0.808249 3.62178,0.969636 3.30775,0.597797 4.99557,1.459951 4.99557,2.551764 0,1.095459 -0.90883,1.367015 -4.57498,1.367015 -3.20356,0 -3.47412,0.04027 -3.58979,0.534154 -0.17365,0.741422 -0.9781,0.898803 -2.98199,0.583409 -2.96133,-0.466104 -3.81641,-0.739726 -5.63411,-1.802878 -3.28042,-1.918708 -4.32921,-2.08799 -13.06764,-2.109219 -9.23958,-0.02245 -12.04119,-0.362595 -14.73764,-1.789302 -0.92687,-0.490421 -3.06914,-0.878112 -7.06065,-1.277779 -1.68572,-0.168786 -3.37173,-0.410322 -3.74668,-0.536725 -1.23753,-0.417227 -2.65632,-0.826222 -4.42842,-1.276598 -0.96165,-0.244404 -2.44709,-0.697048 -3.30098,-1.005875 l -1.55252,-0.561507 -1.93664,0.593223 c -2.12894,0.652134 -3.47651,1.28968 -4.12026,1.949349 -0.64287,0.658754 -2.32036,6.2119 -2.91064,9.635431 -0.7015,4.068455 -1.09685,11.844436 -0.77479,15.238886 0.2445,2.576977 0.59392,4.208044 2.04222,9.532807 0.96619,3.552347 1.93586,9.098209 1.93708,11.078895 5e-4,0.855283 0.16421,2.863259 0.36375,4.462177 1.02483,8.2116 1.93968,20.57556 1.7487,23.63246 -0.15417,2.46739 -0.20417,2.64452 -0.99616,3.5288 -0.50995,0.56936 -0.90335,1.34463 -1.01275,1.99583 -0.0984,0.58565 -0.10689,3.9549 -0.0188,7.4872 0.13845,5.55508 0.26013,6.97702 0.90104,10.52968 0.40754,2.25904 0.91468,4.76042 1.12699,5.5586 0.45581,1.71379 0.52399,9.37349 0.12124,13.62102 -0.46028,4.85426 -0.6532,11.5111 -0.50566,17.44806 l 0.14597,5.87429 1.16984,1.23729 c 0.99692,1.05438 1.23318,1.52012 1.59841,3.15062 0.311,1.38836 0.36696,2.19177 0.20395,2.92829 l -0.22464,1.01498 h -4.99556 -4.99557 l -0.16418,-5.8566 c -0.16282,-5.80817 -0.73442,-13.5494 -1.23284,-16.69626 -0.34244,-2.16204 -1.631462,-7.96267 -1.997185,-8.98739 -0.159098,-0.44576 -0.380174,-1.75172 -0.491278,-2.90213 -0.111105,-1.15041 -0.376211,-3.28388 -0.589122,-4.74106 -0.212919,-1.45717 -0.389134,-4.25481 -0.391598,-6.21695 -0.0047,-3.97932 -0.349155,-6.27936 -1.636161,-10.9345 -0.466481,-1.68725 -1.177062,-4.69923 -1.579079,-6.69326 -0.40202,-1.99403 -0.970288,-4.32969 -1.262827,-5.19035 -0.448412,-1.31925 -0.658509,-1.60506 -1.338712,-1.82113 -0.999809,-0.3176 -1.215276,-1.04252 -1.804822,-6.07213 -0.562623,-4.79979 -0.719107,-5.21707 -1.10255,-2.93984 -0.166718,0.99015 -0.436696,3.29326 -0.599959,5.11804 -0.312062,3.48806 -0.361247,3.60138 -1.697976,3.91215 -0.540266,0.12559 -0.74132,0.45061 -1.174796,1.89908 -0.78164,2.61185 -1.984512,7.93075 -2.410827,10.6603 -0.207191,1.32658 -0.537023,3.12686 -0.732956,4.00064 -0.550893,2.45671 -0.878993,5.13921 -1.149404,9.39746 -0.13637,2.14742 -0.365771,4.34365 -0.509784,4.88049 -0.144011,0.53687 -0.362697,2.16835 -0.485965,3.62553 -0.140531,1.66121 -0.65174,4.31372 -1.370596,7.11157 -1.478063,5.75276 -1.792821,8.50998 -2.133067,18.68534 -0.153871,4.60161 -0.3003,8.68032 -0.3254,9.06378 l -0.04563,0.69722 -4.677853,0.076 c -4.410689,0.0716 -4.706694,0.0436 -5.182898,-0.48805 z"
    />`}function X(e,t,n,s,r){return`<path id=${e} d="M ${t},${n} m -${s},0 a ${s},${s} 0 1,0 ${s*2},0 a ${s},${s} 0 1,0 -${s*2},0 z" stroke="none" fill="${r}"/>`}function Ae(e,t=_e,n=me,s=pe,r=be,i=oe,_=le,p=ye,l=he){let b=document.createElement("div");typeof e>"u"&&(e=document.createElement("div"),document.body.appendChild(e)),e.appendChild(b),b.className="brainbraille-div";let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("id",H("svg")),o.setAttribute("class","body-svg");let h=t*2+s+2*r;o.setAttribute("viewBox",`0 0 ${h} ${n}`),o.setAttribute("style","width: 100%; height: 100%;"),b.setAttribute("style","width: 100vw; height: 94vh; padding-top: 3vh; padding-bottom: 3vh;"),b.appendChild(o);let d=document.createElementNS("http://www.w3.org/2000/svg","line"),v=h/2;d.setAttribute("x1",`${v}`),d.setAttribute("y1","0"),d.setAttribute("x2",`${v}`),d.setAttribute("y1",`${n}`),d.setAttribute("style","stroke-width:2.5;stroke:#858585"),o.appendChild(d);let m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttribute("text-anchor","end"),m.setAttribute("x",`${r+t*29/30}`),m.setAttribute("y",`${n*6/13}`),m.setAttribute("font-size","4.3vh"),m.setAttribute("font-family","Arial, sans-serif"),m.setAttribute("font-weight","bold"),m.setAttribute("fill",`${i.stroke}`),m.innerHTML="Rest",o.appendChild(m);let u=document.createElementNS("http://www.w3.org/2000/svg","text");u.setAttribute("text-anchor","start"),u.setAttribute("x",`${r+t+s+t*1/30}`),u.setAttribute("y",`${n*6/13}`),u.setAttribute("font-size","4.3vh"),u.setAttribute("font-family","Arial, sans-serif"),u.setAttribute("font-weight","bold"),u.setAttribute("fill",`${_.stroke}`),u.innerHTML="Rest",o.appendChild(u);let f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttribute("text-anchor","end"),f.setAttribute("x",`${r+t*29/30}`),f.setAttribute("y",`${n*7/13}`),f.setAttribute("font-size","3vh"),f.setAttribute("font-family","Arial, sans-serif"),f.setAttribute("fill",`${_.stroke}`),f.innerHTML="",o.appendChild(f);let A=document.createElementNS("http://www.w3.org/2000/svg","text");A.setAttribute("text-anchor","end"),A.setAttribute("x",`${r+t*29/30}`),A.setAttribute("y",`${n*1/17}`),A.setAttribute("font-size","2vh"),A.setAttribute("font-family","Arial, sans-serif"),A.setAttribute("fill",`${_.stroke}`),A.innerHTML="",o.appendChild(A);let N=t*p,S=document.createElementNS("http://www.w3.org/2000/svg","g");S.setAttribute("class","bb_curr_body"),S.setAttribute("id",H("g")),S.setAttribute("style",g(i)),S.setAttribute("transform",`translate(${r}, 0)`),o.appendChild(S),S.insertAdjacentHTML("beforeend",J()),S.insertAdjacentHTML("beforeend",W(K,"curr",1,.32));let y=[];for(let a=0;a<6;a++){let k=l[a],$=H("dot");y.push($),S.insertAdjacentHTML("beforeend",X($,t*k.x,n*k.y,N,"None"))}let L=y.map(a=>document.getElementById(a)),x=document.createElementNS("http://www.w3.org/2000/svg","g");x.setAttribute("class","bb_next_body"),x.setAttribute("id",H("g")),x.setAttribute("style",g(_));let R=s+r+t;x.setAttribute("transform",`translate(${R}, 0)`),o.appendChild(x),x.insertAdjacentHTML("beforeend",J()),x.insertAdjacentHTML("beforeend",W(K,"next",.5,.16));let M=[];for(let a=0;a<6;a++){let k=l[a],$=H("dot");M.push($),x.insertAdjacentHTML("beforeend",X($,t*k.x,n*k.y,N,"None"))}let O=M.map(a=>document.getElementById(a));return new Y(b,m,u,f,A,L,O)}async function we(e,t,n){console.log("run_study called");let s=t.curr_l_list.length,r=0,i,_=new Promise(d=>{i=d}),p=d=>{d.key==="Escape"&&(document.removeEventListener("keydown",p),i())};document.addEventListener("keydown",p);let l=Math.ceil(t.expected_task_interval_s/t.expected_TR_s),b=0;document.addEventListener("keypress",h);function o(){if(r<s){let d=t.curr_l_list[r],v=t.curr_word_text_list[r],m;v.phrase_n>-1?m=e[v.phrase_n][v.word_n]:m="";let u=t.next_l_list[r],f=t.curr_l_in_word_ind_list[r];n.update(d,u,m,f,`${r+1}/${s}`),r++}else document.removeEventListener("keydown",p),document.removeEventListener("keypress",h),i()}function h(d){d.key==="t"&&(b++,b===l&&(o(),b=0))}return o(),_}async function ve(e,t,n){let s=t.curr_l_list.length,r=0,i,_,p=new Promise(o=>{_=o}),l=o=>{o.key==="Escape"&&(clearInterval(i),document.removeEventListener("keydown",l),_())};document.addEventListener("keydown",l);function b(){if(r<s){let o=t.curr_l_list[r],h=t.curr_word_text_list[r],d;h.phrase_n>-1?d=e[h.phrase_n][h.word_n]:d="";let v=t.next_l_list[r],m=t.curr_l_in_word_ind_list[r];n.update(o,v,d,m,`${r+1}/${s}`),r++}else i&&(clearInterval(i),document.removeEventListener("keydown",l),_())}return b(),i=setInterval(b,t.expected_task_interval_s*1e3),p}function j(e){e.mode==="Practice"?(e.TR="N.A.",e.start_delay_s>30?e.start_delay_s=30:e.start_delay_s<0&&(e.start_delay_s=0)):e.mode==="Study"&&(e.start_delay_s=0)}function G(e){let t=window.location.search,n=new URLSearchParams(t);for(let[s,r]of Object.entries(e))n.set(s,r);if(n.toString()!==t){let s=`${window.location.protocol}//${window.location.host}${window.location.pathname}?${n.toString()}`;window.history.pushState({path:s},"",s)}}function ee(e,t){j(e),G(e);let n=document.createElement("div");typeof t>"u"&&(t=document.createElement("div"),document.body.appendChild(t)),t.appendChild(n),n.className="bb-control-panel-div";let s={"background-color":"#e5e5e5","align-items":"center",display:"flex","justify-content":"center",height:"20vh",position:"relative",top:"40vh"},r={"background-color":"#efefef","align-items":"center",display:"flex","justify-content":"center",height:"10vh",position:"relative",top:"35vh","font-family":"Arial, sans-serif","font-size":"3em"};n.setAttribute("style",g(s));let i={"font-size":"1.6em","margin-right":"20px",height:"6vh","font-family":"Arial, sans-serif"},_={"font-size":"1.6em","margin-right":"20px",height:"5vh","font-family":"Arial, sans-serif"},p={"font-size":"1.6em","font-family":"Arial, sans-serif","margin-right":"6px"},l=document.createElement("form"),b=document.createElement("label");b.setAttribute("for","modes"),b.innerHTML="Mode:",b.setAttribute("style",g(p)),l.appendChild(b);let o=document.createElement("select");o.setAttribute("name","modes"),o.setAttribute("id","modes");let h=document.createElement("option");h.setAttribute("value","Study"),h.value="Study",h.innerHTML="Study",e.mode==="Study"&&h.setAttribute("selected","selected"),o.appendChild(h);let d=document.createElement("option");d.setAttribute("value","Practice"),d.value="Practice",d.innerHTML="Practice",d.innerHTML="Practice",e.mode==="Practice"&&d.setAttribute("selected","selected"),o.appendChild(d),l.appendChild(o),n.appendChild(l),o.setAttribute("style",g(i));let v=document.createElement("form"),m=document.createElement("label");m.setAttribute("for","interval"),m.innerHTML="Input Interval:",m.setAttribute("style",g(p)),v.appendChild(m);let u=document.createElement("select");u.setAttribute("name","interval"),u.setAttribute("id","interval");let f=document.createElement("option");f.setAttribute("value","3s"),f.value="3s",f.innerHTML="3s",e.interval==="3s"&&f.setAttribute("selected","selected"),u.appendChild(f);let A=document.createElement("option");A.setAttribute("value","1.5s"),A.value="1.5s",A.innerHTML="1.5s",e.interval==="1.5s"&&A.setAttribute("selected","selected"),u.appendChild(A),v.appendChild(u),n.appendChild(v),u.setAttribute("style",g(i));let N=document.createElement("form"),S=document.createElement("label");S.setAttribute("for","TR"),S.innerHTML="fMRI TR:",S.setAttribute("style",g(p)),N.appendChild(S);let y=document.createElement("select");y.setAttribute("name","TR"),y.setAttribute("id","TR");let L=document.createElement("option");L.setAttribute("value","500ms"),L.value="500ms",L.innerHTML="500ms";let x=document.createElement("option");x.setAttribute("value","750ms"),x.value="750ms",x.innerHTML="750ms";let R=document.createElement("option");R.setAttribute("value","N.A."),R.value="N.A.",R.innerHTML="N.A.",y.setAttribute("style",g({...i,width:"100px"}));let M=document.createElement("form"),O=document.createElement("label");O.setAttribute("for","start_delay_s"),O.innerHTML="Start delay(s):",O.setAttribute("style",g(p)),M.appendChild(O);let a=document.createElement("input");a.setAttribute("type","number"),a.setAttribute("min","0"),a.setAttribute("max","30"),a.setAttribute("step","5"),a.setAttribute("id","start_delay_s"),a.setAttribute("style",g(_)),a.setAttribute("value",e.start_delay_s.toString()),a.value=e.start_delay_s.toString(),M.appendChild(O),M.appendChild(a),n.appendChild(M);function k(){e.mode=="Practice"?(y.disabled=!0,e.TR="N.A.",y.contains(L)&&y.removeChild(L),y.contains(x)&&y.removeChild(x),y.appendChild(R),R.setAttribute("selected","selected"),a.disabled=!1,e.start_delay_s=5,a.setAttribute("value",e.start_delay_s.toString()),a.value=e.start_delay_s.toString()):e.mode=="Study"&&(y.disabled=!1,y.contains(R)&&y.removeChild(R),y.appendChild(L),y.appendChild(x),e.TR==="500ms"?L.setAttribute("selected","selected"):e.TR==="750ms"&&x.setAttribute("selected","selected"),a.disabled=!0,e.start_delay_s=0,a.setAttribute("value",e.start_delay_s.toString()),a.value=e.start_delay_s.toString())}k(),N.appendChild(y),n.appendChild(N);let $={display:"block",height:"6vh","padding-left":"26px","padding-right":"26px","font-size":"2em",cursor:"pointer","text-align":"center","margin-right":"10px","border-radius":"3vh",border:"none",color:"white","font-family":"Arial, sans-serif","background-color":V},w=document.createElement("button");w.addEventListener("mouseover",()=>{w.disabled||(w.style.backgroundColor=q)}),w.addEventListener("mouseout",()=>{w.disabled||(w.style.backgroundColor=V)}),w.setAttribute("type","button"),w.setAttribute("style",g($)),w.innerHTML="Start",n.appendChild(w),w.addEventListener("click",async()=>{w.disabled=!0,w.style.backgroundColor=U,re();let c=!0,I=document.createElement("div");I.setAttribute("id","info_panel"),I.setAttribute("style",g(r)),t.appendChild(I);let P,z=new Promise(T=>{P=T});if(e.mode==="Practice"){if(e.start_delay_s>=0&&e.start_delay_s<=30){let C=function(){T--,T>0?I.innerHTML=T.toString():clearInterval(E)},B=function(ne){ne.key==="Escape"&&(clearTimeout(D),clearInterval(E),document.removeEventListener("keydown",B),c=!1,P())};I.innerHTML=e.start_delay_s.toString();let T=e.start_delay_s,E=setInterval(C,1e3),D=setTimeout(()=>{P()},e.start_delay_s*1e3);document.addEventListener("keydown",B)}await z}else if(e.mode==="Study"){let T=function(C){C.key==="t"&&(document.removeEventListener("keypress",T),document.removeEventListener("keydown",E),P())},E=function(C){C.key==="Escape"&&(document.removeEventListener("keypress",T),document.removeEventListener("keydown",E),c=!1,P())};I.innerHTML="Waiting for fMRI to start!",document.addEventListener("keypress",T),document.addEventListener("keydown",E),await z}if(t.removeChild(I),c){t.removeChild(n);let T=Ae(t),E=de(ce),C=e.interval==="3s"?Q:ae,D={expected_task_interval_s:parseFloat(e.interval.substring(0,e.interval.length-1)),expected_TR_s:parseFloat(e.TR.substring(0,e.TR.length-2))/1e3,front_space_padding_s:C.front_space_padding_s,back_space_padding_s:C.back_space_padding_s,num_space_between_words:C.num_space_between_words,num_space_between_sents:C.num_space_between_sents},B=ue(E,D);e.mode==="Practice"?await ve(E,B,T):e.mode==="Study"&&await we(E,B,T),t.removeChild(T.container_div),t.appendChild(n)}w.disabled=!1,w.style.backgroundColor=V,se()}),o.addEventListener("change",c=>{c.target&&"value"in c.target&&(c.target.value==="Study"||c.target.value==="Practice")&&(e.mode=c.target.value,k()),j(e),G(e)}),u.addEventListener("change",c=>{c.target&&"value"in c.target&&(c.target.value==="3s"||c.target.value==="1.5s")&&(e.interval=c.target.value),j(e),G(e)}),y.addEventListener("change",c=>{c.target&&"value"in c.target&&(c.target.value==="500ms"||c.target.value==="750ms")&&(e.TR=c.target.value),j(e),G(e)});function te(c){c.target&&"value"in c.target&&(typeof c.target.value=="number"?e.start_delay_s=c.target.value:typeof c.target.value=="string"&&(e.start_delay_s=parseFloat(c.target.value))),j(e),a.setAttribute("value",e.start_delay_s.toString()),a.value=e.start_delay_s.toString(),G(e)}a.addEventListener("change",te)}ee(Z());})();
//# sourceMappingURL=index.js.map
